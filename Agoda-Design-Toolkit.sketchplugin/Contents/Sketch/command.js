var that=this;function __skpm_run(key,context){that.context=context;var exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/command.js")}({"./node_modules/@skpm/fs/index.js":
/*!****************************************!*\
  !*** ./node_modules/@skpm/fs/index.js ***!
  \****************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! buffer */"buffer").Buffer,o=n(/*! ./utils */"./node_modules/@skpm/fs/utils.js"),a=o.parseStat,i=o.fsError,s=o.fsErrorForPath,c=o.encodingFromOptions,u=o.NOT_IMPLEMENTED;e.exports.constants={F_OK:0,R_OK:4,W_OK:2,X_OK:1},e.exports.access=u("access"),e.exports.accessSync=function(t,n){n|=0;var r=NSFileManager.defaultManager();switch(n){case 0:canAccess=e.exports.existsSync(t);break;case 1:canAccess=Boolean(Number(r.isExecutableFileAtPath(t)));break;case 2:canAccess=Boolean(Number(r.isWritableFileAtPath(t)));break;case 3:canAccess=Boolean(Number(r.isExecutableFileAtPath(t)))&&Boolean(Number(r.isWritableFileAtPath(t)));break;case 4:canAccess=Boolean(Number(r.isReadableFileAtPath(t)));break;case 5:canAccess=Boolean(Number(r.isReadableFileAtPath(t)))&&Boolean(Number(r.isExecutableFileAtPath(t)));break;case 6:canAccess=Boolean(Number(r.isReadableFileAtPath(t)))&&Boolean(Number(r.isWritableFileAtPath(t)));break;case 7:canAccess=Boolean(Number(r.isReadableFileAtPath(t)))&&Boolean(Number(r.isWritableFileAtPath(t)))&&Boolean(Number(r.isExecutableFileAtPath(t)))}if(!canAccess)throw new Error("Can't access "+String(t))},e.exports.appendFile=u("appendFile"),e.exports.appendFileSync=function(t,n,o){if(!e.exports.existsSync(t))return e.exports.writeFileSync(t,n,o);var a=NSFileHandle.fileHandleForWritingAtPath(t);a.seekToEndOfFile();var i=c(o,"utf8"),s=r.from(n,"NSData"===i||"buffer"===i?void 0:i).toNSData();a.writeData(s)},e.exports.chmod=u("chmod"),e.exports.chmodSync=function(e,t){var n=MOPointer.alloc().init();if(NSFileManager.defaultManager().setAttributes_ofItemAtPath_error({NSFilePosixPermissions:t},e,n),null!==n.value())throw s(e,void 0,n.value())},e.exports.chown=u("chown"),e.exports.chownSync=u("chownSync"),e.exports.close=u("close"),e.exports.closeSync=u("closeSync"),e.exports.copyFile=u("copyFile"),e.exports.copyFileSync=function(e,t,n){var r=MOPointer.alloc().init();if(NSFileManager.defaultManager().copyItemAtPath_toPath_error(e,t,r),null!==r.value())throw s(e,!1,r.value())},e.exports.createReadStream=u("createReadStream"),e.exports.createWriteStream=u("createWriteStream"),e.exports.exists=u("exists"),e.exports.existsSync=function(e){var t=NSFileManager.defaultManager();return Boolean(Number(t.fileExistsAtPath(e)))},e.exports.fchmod=u("fchmod"),e.exports.fchmodSync=u("fchmodSync"),e.exports.fchown=u("fchown"),e.exports.fchownSync=u("fchownSync"),e.exports.fdatasync=u("fdatasync"),e.exports.fdatasyncSync=u("fdatasyncSync"),e.exports.fstat=u("fstat"),e.exports.fstatSync=u("fstatSync"),e.exports.fsync=u("fsync"),e.exports.fsyncSync=u("fsyncSync"),e.exports.ftruncate=u("ftruncate"),e.exports.ftruncateSync=u("ftruncateSync"),e.exports.futimes=u("futimes"),e.exports.futimesSync=u("futimesSync"),e.exports.lchmod=u("lchmod"),e.exports.lchmodSync=u("lchmodSync"),e.exports.lchown=u("lchown"),e.exports.lchownSync=u("lchownSync"),e.exports.link=u("link"),e.exports.linkSync=function(e,t){var n=MOPointer.alloc().init();if(NSFileManager.defaultManager().linkItemAtPath_toPath_error(e,t,n),null!==n.value())throw s(e,void 0,n.value())},e.exports.lstat=u("lstat"),e.exports.lstatSync=function(e){var t=MOPointer.alloc().init(),n=NSFileManager.defaultManager().attributesOfItemAtPath_error(e,t);if(null!==t.value())throw s(e,void 0,t.value());return a(n)},e.exports.mkdir=u("mkdir"),e.exports.mkdirSync=function(e,t){var n=511,r=!1;t&&t.mode&&(n=t.mode),t&&t.recursive&&(r=t.recursive),"number"==typeof t&&(n=t);var o=MOPointer.alloc().init();if(NSFileManager.defaultManager().createDirectoryAtPath_withIntermediateDirectories_attributes_error(e,r,{NSFilePosixPermissions:n},o),null!==o.value())throw new Error(o.value())},e.exports.mkdtemp=u("mkdtemp"),e.exports.mkdtempSync=function(t){var n=t+function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<6;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();return e.exports.mkdirSync(n),n},e.exports.open=u("open"),e.exports.openSync=u("openSync"),e.exports.read=u("read"),e.exports.readdir=u("readdir"),e.exports.readdirSync=function(e,t){for(var n=c(t,"utf8"),o=NSFileManager.defaultManager().subpathsAtPath(e),a=[],i=0;i<o.length;i++){var s=o[i];a.push("buffer"===n?r.from(s):String(s))}return a},e.exports.readFile=u("readFile"),e.exports.readFileSync=function(e,t){var n=c(t,"buffer"),o=NSFileManager.defaultManager().contentsAtPath(e);if(!o)throw s(e,!1);var a=r.from(o);return"buffer"===n?a:"NSData"===n?a.toNSData():a.toString(n)},e.exports.readlink=u("readlink"),e.exports.readlinkSync=function(e){var t=MOPointer.alloc().init(),n=NSFileManager.defaultManager().destinationOfSymbolicLinkAtPath_error(e,t);if(null!==t.value())throw s(e,void 0,t.value());return String(n)},e.exports.readSync=u("readSync"),e.exports.realpath=u("realpath"),e.exports.realpath.native=u("realpath.native"),e.exports.realpathSync=function(e){return String(NSString.stringWithString(e).stringByResolvingSymlinksInPath())},e.exports.realpathSync.native=u("realpathSync.native"),e.exports.rename=u("rename"),e.exports.renameSync=function(e,t){var n=MOPointer.alloc().init(),r=NSFileManager.defaultManager();r.moveItemAtPath_toPath_error(e,t,n);var o=n.value();if(null!==o){if("NSCocoaErrorDomain"!==String(o.domain())||516!==Number(o.code()))throw s(e,void 0,o);var a=MOPointer.alloc().init();if(r.replaceItemAtURL_withItemAtURL_backupItemName_options_resultingItemURL_error(NSURL.fileURLWithPath(t),NSURL.fileURLWithPath(e),null,NSFileManagerItemReplacementUsingNewMetadataOnly,null,a),null!==a.value())throw s(e,void 0,a.value())}},e.exports.rmdir=u("rmdir"),e.exports.rmdirSync=function(t){var n=MOPointer.alloc().init(),r=NSFileManager.defaultManager();if(!e.exports.lstatSync(t).isDirectory())throw i("ENOTDIR",{path:t,syscall:"rmdir"});if(r.removeItemAtPath_error(t,n),null!==n.value())throw s(t,!0,n.value(),"rmdir")},e.exports.stat=u("stat"),e.exports.statSync=function(t){return e.exports.lstatSync(e.exports.realpathSync(t))},e.exports.symlink=u("symlink"),e.exports.symlinkSync=function(e,t){var n=MOPointer.alloc().init();NSFileManager.defaultManager().createSymbolicLinkAtPath_withDestinationPath_error(t,e,n);if(null!==n.value())throw new Error(n.value())},e.exports.truncate=u("truncate"),e.exports.truncateSync=function(e,t){var n=NSFileHandle.fileHandleForUpdatingAtPath(sFilePath);n.truncateFileAtOffset(t||0),n.closeFile()},e.exports.unlink=u("unlink"),e.exports.unlinkSync=function(t){var n=MOPointer.alloc().init(),r=NSFileManager.defaultManager();if(e.exports.lstatSync(t).isDirectory())throw i("EPERM",{path:t,syscall:"unlink"});r.removeItemAtPath_error(t,n);if(null!==n.value())throw s(t,!1,n.value())},e.exports.unwatchFile=u("unwatchFile"),e.exports.utimes=u("utimes"),e.exports.utimesSync=function(e,t,n){var r=MOPointer.alloc().init();NSFileManager.defaultManager().setAttributes_ofItemAtPath_error({NSFileModificationDate:t},e,r);if(null!==r.value())throw s(e,void 0,r.value())},e.exports.watch=u("watch"),e.exports.watchFile=u("watchFile"),e.exports.write=u("write"),e.exports.writeFile=u("writeFile"),e.exports.writeFileSync=function(e,t,n){var o=c(n,"utf8");r.from(t,"NSData"===o||"buffer"===o?void 0:o).toNSData().writeToFile_atomically(e,!0)},e.exports.writeSync=u("writeSync")},"./node_modules/@skpm/fs/utils.js":
/*!****************************************!*\
  !*** ./node_modules/@skpm/fs/utils.js ***!
  \****************************************/
/*! no static exports found */function(e,t){e.exports.parseStat=function(e){return{dev:String(e.NSFileDeviceIdentifier),mode:e.NSFileType|e.NSFilePosixPermissions,nlink:Number(e.NSFileReferenceCount),uid:String(e.NSFileOwnerAccountID),gid:String(e.NSFileGroupOwnerAccountID),size:Number(e.NSFileSize),atimeMs:1e3*Number(e.NSFileModificationDate.timeIntervalSince1970()),mtimeMs:1e3*Number(e.NSFileModificationDate.timeIntervalSince1970()),ctimeMs:1e3*Number(e.NSFileModificationDate.timeIntervalSince1970()),birthtimeMs:1e3*Number(e.NSFileCreationDate.timeIntervalSince1970()),atime:new Date(1e3*Number(e.NSFileModificationDate.timeIntervalSince1970())+.5),mtime:new Date(1e3*Number(e.NSFileModificationDate.timeIntervalSince1970())+.5),ctime:new Date(1e3*Number(e.NSFileModificationDate.timeIntervalSince1970())+.5),birthtime:new Date(1e3*Number(e.NSFileCreationDate.timeIntervalSince1970())+.5),isBlockDevice:function(){return e.NSFileType===NSFileTypeBlockSpecial},isCharacterDevice:function(){return e.NSFileType===NSFileTypeCharacterSpecial},isDirectory:function(){return e.NSFileType===NSFileTypeDirectory},isFIFO:function(){return!1},isFile:function(){return e.NSFileType===NSFileTypeRegular},isSocket:function(){return e.NSFileType===NSFileTypeSocket},isSymbolicLink:function(){return e.NSFileType===NSFileTypeSymbolicLink}}};var n={EPERM:{message:"operation not permitted",errno:-1},ENOENT:{message:"no such file or directory",errno:-2},EACCES:{message:"permission denied",errno:-13},ENOTDIR:{message:"not a directory",errno:-20},EISDIR:{message:"illegal operation on a directory",errno:-21}};function r(e,t){var r=new Error(e+": "+n[e].message+", "+(t.syscall||"")+(t.path?" '"+t.path+"'":""));return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.code=e,r.errno=n[e].errno,r}e.exports.fsError=r,e.exports.fsErrorForPath=function(t,n,o,a){var i=NSFileManager.defaultManager();if(!i.fileExistsAtPath(t))return r("ENOENT",{path:t,syscall:a||"open"});if(!i.isReadableFileAtPath(t))return r("EACCES",{path:t,syscall:a||"open"});if(void 0!==n){var s=e.exports.lstatSync(t).isDirectory();if(s&&!n)return r("EISDIR",{path:t,syscall:a||"read"});if(!s&&n)return r("ENOTDIR",{path:t,syscall:a||"read"})}return new Error(o||"Unknown error while manipulating "+t)},e.exports.encodingFromOptions=function(e,t){return e&&e.encoding?String(e.encoding):e?String(e):t},e.exports.NOT_IMPLEMENTED=function(e){return function(){throw new Error("fs."+e+" is not implemented yet. If you feel like implementing it, any contribution will be gladly accepted on https://github.com/skpm/fs")}}},"./node_modules/@skpm/timers/immediate.js":
/*!************************************************!*\
  !*** ./node_modules/@skpm/timers/immediate.js ***!
  \************************************************/
/*! no static exports found */function(e,t,n){var r=n(/*! ./timeout */"./node_modules/@skpm/timers/timeout.js");e.exports={setImmediate:function(e,t,n,o,a,i,s,c,u,l,d){return r.setTimeout(e,0,t,n,o,a,i,s,c,u,l,d)},clearImmediate:function(e){return r.clearTimeout(e)}}},"./node_modules/@skpm/timers/test-if-fiber.js":
/*!****************************************************!*\
  !*** ./node_modules/@skpm/timers/test-if-fiber.js ***!
  \****************************************************/
/*! no static exports found */function(e,t){e.exports=function(){return"undefined"!=typeof coscript&&coscript.createFiber}},"./node_modules/@skpm/timers/timeout.js":
/*!**********************************************!*\
  !*** ./node_modules/@skpm/timers/timeout.js ***!
  \**********************************************/
/*! no static exports found */function(e,t,n){var r,o,a=[];if(n(/*! ./test-if-fiber */"./node_modules/@skpm/timers/test-if-fiber.js")()){a=[];r=function(e,t,n,r,o,i,s,c,u,l,d,m){var p=a.length;return a.push(coscript.scheduleWithInterval_jsFunction((t||0)/1e3,function(){e(n,r,o,i,s,c,u,l,d,m)})),p},o=function(e){var t=a[e];t&&(t.cancel(),a[e]=void 0)}}else r=function(e,t,n,r,i,s,c,u,l,d,m,p){coscript.shouldKeepAround=!0;var f=a.length;return a.push(!0),coscript.scheduleWithInterval_jsFunction((t||0)/1e3,function(){a[f]&&e(n,r,i,s,c,u,l,d,m,p),o(f),a.every(function(e){return!e})&&(coscript.shouldKeepAround=!1)}),f},o=function(e){a[e]=!1};e.exports={setTimeout:r,clearTimeout:o}},"./node_modules/cocoascript-class/lib/index.js":
/*!*****************************************************!*\
  !*** ./node_modules/cocoascript-class/lib/index.js ***!
  \*****************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuperCall=void 0,t.default=function(e){const t=e.superclass||NSObject,n=(e.className||e.classname||"ObjCClass")+NSUUID.UUID().UUIDString(),a=new Set(["className","classname","superclass"]);var i=MOClassDescription.allocateDescriptionForClassWithName_superclass_(n,t);const s=[];for(var c in e){const t=e[c];if("function"==typeof t&&"init"!==c){var u=NSSelectorFromString(c);i.addInstanceMethodWithSelector_function_(u,t)}else a.has(c)||(s.push(c),i.addInstanceVariableWithName_typeEncoding(c,"@"))}return i.addInstanceMethodWithSelector_function_(NSSelectorFromString("init"),function(){const t=o.call(this);return s.map(n=>{Object.defineProperty(t,n,{get:()=>(function(e,t){const n=MOPointer.new();return(0,r.object_getInstanceVariable)(e,t,n),n.value().retain().autorelease()})(t,n),set(e){(0,r.object_setInstanceVariable)(t,n,e)}}),t[n]=e[n]}),"function"==typeof e.init&&e.init.call(this),t}),i.registerClass()};var r=n(/*! ./runtime.js */"./node_modules/cocoascript-class/lib/runtime.js");t.SuperCall=r.SuperCall;const o=(0,r.SuperCall)(NSStringFromSelector("init"),[],{type:"@"})},"./node_modules/cocoascript-class/lib/runtime.js":
/*!*******************************************************!*\
  !*** ./node_modules/cocoascript-class/lib/runtime.js ***!
  \*******************************************************/
/*! no static exports found */function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuperCall=function(e,t,n){const o=a("objc_msgSendSuper",[{type:"^"+r},{type:":"},...t],n);return function(...t){const n=function(e,t){return function e(t){if("object"!=typeof t||0==Object.keys(t).length)return t;const n=Object.keys(t)[0];const r=t[n];const o=MOStruct.structureWithName_memberNames_runtime(n,Object.keys(r),Mocha.sharedRuntime());Object.keys(r).map(t=>{o[t]=e(r[t])});return o}({objc_super:{receiver:e,super_class:t}})}(this,this.superclass()),r=MOPointer.alloc().initWithValue_(n);return o(r,e,...t)}},t.CFunc=a;const r='{objc_super="receiver"@"super_class"#}';function o(e,t){const n=NSMutableDictionary.dictionary();n.o=e,Object.keys(t).map(e=>n.setValue_forKeyPath(t[e],"o."+e))}function a(e,t,n){function r(e){if(!e)return null;const t=MOBridgeSupportArgument.alloc().init();return o(t,{type64:e.type}),t}const a=MOBridgeSupportFunction.alloc().init();return o(a,{name:e,arguments:t.map(r),returnValue:r(n)}),a}t.object_getInstanceVariable=a("object_getInstanceVariable",[{type:"@"},{type:"*"},{type:"^@"}],{type:"^{objc_ivar=}"}),t.object_setInstanceVariable=a("object_setInstanceVariable",[{type:"@"},{type:"*"},{type:"@"}],{type:"^{objc_ivar=}"});!function(e,t){const n=MOBridgeSupportController.sharedController().valueForKey("symbols");if(!n)throw Error("Something has changed within bridge support so we can't add our definitions");if(null!==n[e])return;const r=MOBridgeSupportStruct.alloc().init();o(r,{name:e,type:t.type}),n[e]=r}("objc_super",{type:r})},"./node_modules/mocha-js-delegate/index.js":
/*!*************************************************!*\
  !*** ./node_modules/mocha-js-delegate/index.js ***!
  \*************************************************/
/*! no static exports found */function(module,exports){module.exports=function(selectorHandlerDict,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject);delegateClassDesc.registerClass();var handlers={};if(this.setHandlerForSelector=function(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function_(selector,dynamicFunction)}},this.removeHandlerForSelector=function(e){delete handlers[e]},this.getHandlerForSelector=function(e){return handlers[e]},this.getAllHandlers=function(){return handlers},this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(){return NSClassFromString(uniqueClassName).new()},"object"==typeof selectorHandlerDict)for(var selectorString in selectorHandlerDict)this.setHandlerForSelector(selectorString,selectorHandlerDict[selectorString])}},"./node_modules/promise-polyfill/lib/index.js":
/*!****************************************************!*\
  !*** ./node_modules/promise-polyfill/lib/index.js ***!
  \****************************************************/
/*! no static exports found */function(e,t,n){"use strict";(function(t,n){var r=t;function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function i(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}s(t.promise,r)}else(1===e._state?s:c)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void u(e);if("function"==typeof n)return void l(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,u(e)}catch(t){c(e,t)}}function c(e,t){e._state=2,e._value=t,u(e)}function u(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)i(e,e._deferreds[t]);e._deferreds=null}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return i(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},a.prototype.finally=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})},a.all=function(e){return new a(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function a(e,i){try{if(i&&("object"==typeof i||"function"==typeof i)){var s=i.then;if("function"==typeof s)return void s.call(i,function(t){a(e,t)},n)}r[e]=i,0==--o&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)})},a._immediateFn="function"==typeof n&&function(e){n(e)}||function(e){r(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},e.exports=a}).call(this,n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout,n(/*! ./node_modules/@skpm/timers/immediate.js */"./node_modules/@skpm/timers/immediate.js").setImmediate)},"./node_modules/sketch-module-user-preferences/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/sketch-module-user-preferences/index.js ***!
  \**************************************************************/
/*! no static exports found */function(e,t){function n(e){return null!=e}e.exports={getUserPreferences:function(e,t){var r={},o=NSUserDefaults.alloc().initWithSuiteName("plugin.sketch."+e);return Object.keys(t).forEach(function(e){"boolean"==typeof t[e]?r[e]=n(o.boolForKey(e))?Boolean(o.boolForKey(e)):t[e]:"number"==typeof t[e]?r[e]=n(o.doubleForKey(e))?o.doubleForKey(e):t[e]:"string"==typeof t[e]?r[e]=n(o.stringForKey(e))?""+o.stringForKey(e):t[e]:Array.isArray(t[e])?r[e]=o.arrayForKey(e)||t[e]:r[e]=o.dictionaryForKey(e)||t[e]}),r},setUserPreferences:function(e,t){var n=NSUserDefaults.alloc().initWithSuiteName("plugin.sketch."+e);Object.keys(t).forEach(function(e){"boolean"==typeof t[e]?n.setBool_forKey(t[e],e):"number"==typeof t[e]?n.setDouble_forKey(t[e],e):n.setObject_forKey(t[e],e)}),n.synchronize()}}},"./node_modules/sketch-polyfill-fetch/lib/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/sketch-polyfill-fetch/lib/index.js ***!
  \*********************************************************/
/*! no static exports found */function(e,t,n){(function(t){var r,o,a=n(/*! cocoascript-class */"./node_modules/cocoascript-class/lib/index.js").default;try{r=n(/*! buffer */"buffer").Buffer}catch(e){}e.exports=function(e,n){var i;n=n||{};try{i=coscript.createFiber()}catch(e){coscript.shouldKeepAround=!0}return new t(function(s,c){var u=NSURL.alloc().initWithString(e),l=NSMutableURLRequest.requestWithURL(u);if(l.setHTTPMethod(n.method||"GET"),Object.keys(n.headers||{}).forEach(function(e){l.setValue_forHTTPHeaderField(n.headers[e],e)}),n.body){var d;if("string"==typeof n.body)d=NSString.alloc().initWithString(n.body).dataUsingEncoding(NSUTF8StringEncoding);else if(r&&r.isBuffer(n.body))d=n.body.toNSData();else if(n.body.isKindOfClass&&1==n.body.isKindOfClass(NSData))d=n.body;else if(n.body._isFormData){var m=n.body._boundary;(d=n.body._data).appendData(NSString.alloc().initWithString("--"+m+"--\r\n").dataUsingEncoding(NSUTF8StringEncoding)),l.setValue_forHTTPHeaderField("multipart/form-data; boundary="+m,"Content-Type")}else d=NSJSONSerialization.dataWithJSONObject_options_error(n.body,NSJSONWritingPrettyPrinted,void 0),l.setValue_forHTTPHeaderField(""+d.length(),"Content-Length");l.setHTTPBody(d)}if(n.cache)switch(n.cache){case"reload":case"no-cache":case"no-store":l.setCachePolicy(1);case"force-cache":l.setCachePolicy(2);case"only-if-cached":l.setCachePolicy(3)}n.credentials||l.setHTTPShouldHandleCookies(!1),o||(o=a({classname:"FetchPolyfillDelegate",data:null,httpResponse:null,fiber:null,callbacks:null,"connectionDidFinishLoading:":function(e){this.callbacks.succeed(this.httpResponse,this.data),this.fiber?this.fiber.cleanup():coscript.shouldKeepAround=!1},"connection:didReceiveResponse:":function(e,t){this.httpResponse=t,this.data=NSMutableData.alloc().init()},"connection:didFailWithError:":function(e,t){this.callbacks.fail(t),this.fiber?this.fiber.cleanup():coscript.shouldKeepAround=!1},"connection:didReceiveData:":function(e,t){this.data.appendData(t)}}));var p=!1,f=o.new();f.callbacks=NSDictionary.dictionaryWithDictionary({succeed:function(e,n){p=!0,s(function e(n,o){for(var a,i=[],s=[],c={},u=0;u<n.allHeaderFields().allKeys().length;u++){var l=n.allHeaderFields().allKeys()[u].toLowerCase(),d=String(n.allHeaderFields()[l]);i.push(l),s.push([l,d]),a=c[l],c[l]=a?a+","+d:d}return{ok:1==(n.statusCode()/200|0),status:Number(n.statusCode()),statusText:NSHTTPURLResponse.localizedStringForStatusCode(n.statusCode()),useFinalURL:!0,url:String(n.URL().absoluteString()),clone:e.bind(this,n,o),text:function(){return new t(function(e,t){const n=NSString.alloc().initWithData_encoding(o,NSASCIIStringEncoding);n?e(n):t(new Error("Couldn't parse body"))})},json:function(){return new t(function(e,t){var n=NSString.alloc().initWithData_encoding(o,NSUTF8StringEncoding);n?e(JSON.parse(n)):t(new Error("Could not parse JSON because it is not valid UTF-8 data."))})},blob:function(){return t.resolve(o)},arrayBuffer:function(){return t.resolve(r.from(o))},headers:{keys:function(){return i},entries:function(){return s},get:function(e){return c[e.toLowerCase()]},has:function(e){return e.toLowerCase()in c}}}}(e,n))},fail:function(e){p=!0,c(e)}}),f.fiber=i;var h=NSURLConnection.alloc().initWithRequest_delegate(l,f);i&&i.onCleanup(function(){p||h.cancel()})})}}).call(this,n(/*! ./node_modules/promise-polyfill/lib/index.js */"./node_modules/promise-polyfill/lib/index.js"))},"./src/command.js":
/*!************************!*\
  !*** ./src/command.js ***!
  \************************/
/*! exports provided: onStartup, onShutdown, onSupplyHotelName, onSupplyAddress, onSupplyCountry, onSupplyAirport, onSupplyCity, onSupplyWeather, onSupplyTimestamp, onSupplyName, onSupplyAircraft, onSupplyAirlineName, onSupplyAirportCode, onSupplyDate, onSupplyEmail, onSupplyFlightDuration, onSupplyFlightNumber, onSupplyHotelAmenity, onSupplyHotelDescription, onSupplyHotelRoomType, onSupplyNameAndInitial, onSupplyUsername, onSupply24HourTime, onSupplyHeroImage, onSupplyRoomImage, onSupplyFacilityImage, openPanel, onSelectionChange, commandTextAddressShort, commandTextAddressMedium, commandTextAddressLong, commandTextAirportShort, commandTextAirportMedium, commandTextAirportLong, commandTextCityShort, commandTextCityMedium, commandTextCityLong, commandTextCountryShort, commandTextCountryMedium, commandTextCountryLong, commandTextPropertyShort, commandTextPropertyMedium, commandTextPropertyLong, commandTextWeatherShort, commandTextWeatherMedium, commandTextWeatherLong, commandTextCurrencyShort, commandTextCurrencyMedium, commandTextCurrencyLong, commandTextTimestampShort, commandTextTimestampMedium, commandTextTimestampLong, commandTextNameShort, commandTextNameMedium, commandTextNameLong, commandImagePropertyHero, commandImagePropertyRoom, commandImagePropertyFacilities */function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"onStartup",function(){return N}),n.d(t,"onShutdown",function(){return k}),n.d(t,"onSupplyHotelName",function(){return T}),n.d(t,"onSupplyAddress",function(){return F}),n.d(t,"onSupplyCountry",function(){return w}),n.d(t,"onSupplyAirport",function(){return M}),n.d(t,"onSupplyCity",function(){return P}),n.d(t,"onSupplyWeather",function(){return A}),n.d(t,"onSupplyTimestamp",function(){return D}),n.d(t,"onSupplyName",function(){return C}),n.d(t,"onSupplyAircraft",function(){return I}),n.d(t,"onSupplyAirlineName",function(){return O}),n.d(t,"onSupplyAirportCode",function(){return W}),n.d(t,"onSupplyDate",function(){return R}),n.d(t,"onSupplyEmail",function(){return L}),n.d(t,"onSupplyFlightDuration",function(){return j}),n.d(t,"onSupplyFlightNumber",function(){return E}),n.d(t,"onSupplyHotelAmenity",function(){return U}),n.d(t,"onSupplyHotelDescription",function(){return H}),n.d(t,"onSupplyHotelRoomType",function(){return B}),n.d(t,"onSupplyNameAndInitial",function(){return V}),n.d(t,"onSupplyUsername",function(){return K}),n.d(t,"onSupply24HourTime",function(){return q}),n.d(t,"onSupplyHeroImage",function(){return $}),n.d(t,"onSupplyRoomImage",function(){return z}),n.d(t,"onSupplyFacilityImage",function(){return J}),n.d(t,"openPanel",function(){return Z}),n.d(t,"onSelectionChange",function(){return Q}),n.d(t,"commandTextAddressShort",function(){return ee}),n.d(t,"commandTextAddressMedium",function(){return te}),n.d(t,"commandTextAddressLong",function(){return ne}),n.d(t,"commandTextAirportShort",function(){return re}),n.d(t,"commandTextAirportMedium",function(){return oe}),n.d(t,"commandTextAirportLong",function(){return ae}),n.d(t,"commandTextCityShort",function(){return ie}),n.d(t,"commandTextCityMedium",function(){return se}),n.d(t,"commandTextCityLong",function(){return ce}),n.d(t,"commandTextCountryShort",function(){return ue}),n.d(t,"commandTextCountryMedium",function(){return le}),n.d(t,"commandTextCountryLong",function(){return de}),n.d(t,"commandTextPropertyShort",function(){return me}),n.d(t,"commandTextPropertyMedium",function(){return pe}),n.d(t,"commandTextPropertyLong",function(){return fe}),n.d(t,"commandTextWeatherShort",function(){return he}),n.d(t,"commandTextWeatherMedium",function(){return ye}),n.d(t,"commandTextWeatherLong",function(){return Se}),n.d(t,"commandTextCurrencyShort",function(){return ge}),n.d(t,"commandTextCurrencyMedium",function(){return be}),n.d(t,"commandTextCurrencyLong",function(){return _e}),n.d(t,"commandTextTimestampShort",function(){return ve}),n.d(t,"commandTextTimestampMedium",function(){return xe}),n.d(t,"commandTextTimestampLong",function(){return Ne}),n.d(t,"commandTextNameShort",function(){return ke}),n.d(t,"commandTextNameMedium",function(){return Te}),n.d(t,"commandTextNameLong",function(){return Fe}),n.d(t,"commandImagePropertyHero",function(){return we}),n.d(t,"commandImagePropertyRoom",function(){return Me}),n.d(t,"commandImagePropertyFacilities",function(){return Pe});var r=n(/*! mocha-js-delegate */"./node_modules/mocha-js-delegate/index.js"),o=n.n(r),a=n(/*! sketch-polyfill-fetch */"./node_modules/sketch-polyfill-fetch/lib/index.js"),i=n.n(a),s=n(/*! sketch-module-user-preferences */"./node_modules/sketch-module-user-preferences/index.js"),c=n.n(s),u=n(/*! sketch */"sketch"),l=u.DataSupplier,d=u.UI,m=(u.Settings,n(/*! os */"os")),p=n(/*! path */"path"),f=n(/*! util */"util"),h=n(/*! @skpm/fs */"./node_modules/@skpm/fs/index.js"),y={Solid:0,Gradient:1,Pattern:4,Noise:5},S={Tile:0,Fill:1,Stretch:2,Fit:3},g={downloading:"🕑 Downloading...",complete:"✅ Complete!"},b={title:"🛠 Agoda Design Toolkit",imageUrlBroken:"Some image urls cannot be reached!",selectText:"Select any text layers.",selectLayerWithFill:"Select any layers with at least one fill style."},_="com.agoda.sketchplugin.datagenerator",v=c.a.getUserPreferences(_,{randomisation:!0}),x=p.join(m.tmpdir(),_);function N(){l.registerDataSupplier("public.text","Hotel Names","SupplyHotelName"),l.registerDataSupplier("public.text","Address","SupplyAddress"),l.registerDataSupplier("public.text","Countries","SupplyCountry"),l.registerDataSupplier("public.text","Airport Names","SupplyAirport"),l.registerDataSupplier("public.text","Cities","SupplyCity"),l.registerDataSupplier("public.text","Weather","SupplyWeather"),l.registerDataSupplier("public.text","Timestamp","SupplyTimestamp"),l.registerDataSupplier("public.text","Person Names","SupplyName"),l.registerDataSupplier("public.text","Aircraft Types","SupplyAircraft"),l.registerDataSupplier("public.text","Airline Names","SupplyAirlineName"),l.registerDataSupplier("public.text","Airport Code","SupplyAirportCode"),l.registerDataSupplier("public.text","Dates (DDMMYYYY)","SupplyDate"),l.registerDataSupplier("public.text","Email","SupplyEmail"),l.registerDataSupplier("public.text","Flight Duration","SupplyFlightDuration"),l.registerDataSupplier("public.text","Flight Numbers","SupplyFlightNumber"),l.registerDataSupplier("public.text","Hotel Amenities","SupplyHotelAmenity"),l.registerDataSupplier("public.text","Hotel Description","SupplyHotelDescription"),l.registerDataSupplier("public.text","Hotel Room Types","SupplyHotelRoomType"),l.registerDataSupplier("public.text","Names & Initials","SupplyNameAndInitial"),l.registerDataSupplier("public.text","Usernames","SupplyUsername"),l.registerDataSupplier("public.text","24-Hour Time","Supply24HourTime"),l.registerDataSupplier("public.image","Hotel Front Images","SupplyHeroImage"),l.registerDataSupplier("public.image","Hotel Room Images","SupplyRoomImage"),l.registerDataSupplier("public.image","Hotel Facility Images","SupplyFacilityImage")}function k(){l.deregisterDataSuppliers();try{h.existsSync(x)&&h.rmdirSync(x)}catch(e){console.error(e)}}function T(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"property-name")}function F(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"address")}function w(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"country")}function M(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"airports")}function P(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"cities")}function A(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"weather")}function D(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"timestamp")}function C(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"names")}function I(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"aircraft-type")}function O(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"airline-name")}function W(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"airport-code")}function R(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"dates")}function L(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"email")}function j(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"flight-duration")}function E(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"flight-number")}function U(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"hotel-amenities")}function H(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"hotel-description")}function B(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"hotel-room-name")}function V(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"names-initials")}function K(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"username")}function q(e){G(e.data.key,f.toArray(e.data.items).map(u.fromNative),"24hour-format")}function $(e){Y(e.data.key,f.toArray(e.data.items).map(u.fromNative),"property")}function z(e){Y(e.data.key,f.toArray(e.data.items).map(u.fromNative),"room")}function J(e){Y(e.data.key,f.toArray(e.data.items).map(u.fromNative),"facilities")}function G(e,t,n){De(function(r){t.forEach(function(t,o){var a,i=(a="short"in r.data[n]||"medium"in r.data[n]||"long"in r.data[n]?function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}([r.data[n].long,r.data[n].medium,r.data[n].short]):r.data[n])[Le(0,a.length-1)];l.supplyDataAtIndex(e,i,o)})})}function Y(e,t,n){d.message(g.downloading),De(function(r){t.forEach(function(t,o){var a=r.data.images[n],s=a[Le(0,a.length-1)];!function(e,t,n){(function(e){return i()(encodeURI(e)).then(function(e){return e.blob()}).then(X).catch(function(e){console.error(e),log(e)})})(n).then(function(n){n&&(l.supplyDataAtIndex(e,n,t),d.message(g.complete))})}(e,o,s)})})}function X(e){var t=NSProcessInfo.processInfo().globallyUniqueString(),n=p.join(x,"".concat(t,".jpg"));try{h.mkdirSync(x)}catch(e){}try{return h.writeFileSync(n,e,"NSData"),n}catch(e){return console.error(e),void log(e)}}function Z(e){var t=NSThread.mainThread().threadDictionary(),n=_;if(!t[n]){var r=NSPanel.alloc().init();r.setFrame_display(NSMakeRect(0,0,430,590),!0),r.setStyleMask(NSTexturedBackgroundWindowMask|NSTitledWindowMask|NSClosableWindowMask|NSFullSizeContentViewWindowMask),r.setBackgroundColor(NSColor.colorWithRed_green_blue_alpha(.1294117647,.1294117647,.1294117647,1)),r.titlebarAppearsTransparent=!0,r.center(),r.makeKeyAndOrderFront(null),r.setLevel(NSFloatingWindowLevel),COScript.currentCOScript().setShouldKeepAround_(!0),r.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),r.standardWindowButton(NSWindowZoomButton).setHidden(!0);var a=WebView.alloc().initWithFrame(NSMakeRect(0,0,430,546)),i=NSURLRequest.requestWithURL(e.plugin.urlForResourceNamed("webView-230.html"));a.mainFrame().loadRequest(i),a.setDrawsBackground(!1);var s=a.windowScriptObject(),c=new o.a({"webView:didChangeLocationWithinPageForFrame:":function(t,n){var r=s.evaluateWebScript("window.location.hash.substring(1)"),o=JSON.parse(r);Ie(e,o)},"webView:didFinishLoadForFrame:":function(t,n){var r=e.selection;if(1==r.length){var o=r[0];if("MSTextLayer"==o.class()){var a=o.stringValue();s.evaluateWebScript("updateWordCount('"+a+"')")}else{a="$$$NotTextLayer$$$";s.evaluateWebScript("updateWordCount('"+a+"')")}}else{a="$$$NotTextLayer$$$";s.evaluateWebScript("updateWordCount('"+a+"')")}v.randomisation?s.evaluateWebScript("updateRandomisationBox('true')"):s.evaluateWebScript("updateRandomisationBox('false')")}});a.setFrameLoadDelegate_(c.getClassInstance()),r.contentView().addSubview(a),t[n]=r,r.standardWindowButton(NSWindowCloseButton).setCOSJSTargetFunction(function(e){r.close(),t.removeObjectForKey(n),COScript.currentCOScript().setShouldKeepAround_(!1)})}}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=NSThread.mainThread().threadDictionary(),r=_;if(n[r]){var o,a=n[r].contentView().subviews()[0].windowScriptObject();if(1==(o=2==t?e.document.selectedLayers().layers():e.actionContext.document.selectedLayers().layers()).length){var i=o[0];if("MSTextLayer"==i.class()){var s=i.stringValue();a.evaluateWebScript("updateWordCount('"+s+"')")}else{s="$$$NotTextLayer$$$";a.evaluateWebScript("updateWordCount('"+s+"')")}}else{s="$$$NotTextLayer$$$";a.evaluateWebScript("updateWordCount('"+s+"')")}}}function ee(e){Ae(e,"address","short")}function te(e){Ae(e,"address","medium")}function ne(e){Ae(e,"address","long")}function re(e){Ae(e,"airports","short")}function oe(e){Ae(e,"airports","medium")}function ae(e){Ae(e,"airports","long")}function ie(e){Ae(e,"cities","short")}function se(e){Ae(e,"cities","medium")}function ce(e){Ae(e,"cities","long")}function ue(e){Ae(e,"country","short")}function le(e){Ae(e,"country","medium")}function de(e){Ae(e,"country","long")}function me(e){Ae(e,"property-name","short")}function pe(e){Ae(e,"property-name","medium")}function fe(e){Ae(e,"property-name","long")}function he(e){Ae(e,"weather","short")}function ye(e){Ae(e,"weather","medium")}function Se(e){Ae(e,"weather","long")}function ge(e){Ae(e,"currency","short")}function be(e){Ae(e,"currency","medium")}function _e(e){Ae(e,"currency","long")}function ve(e){Ae(e,"timestamp","short")}function xe(e){Ae(e,"timestamp","medium")}function Ne(e){Ae(e,"timestamp","long")}function ke(e){Ae(e,"names","short")}function Te(e){Ae(e,"names","medium")}function Fe(e){Ae(e,"names","long")}function we(e){Ae(e,"images","property")}function Me(e){Ae(e,"images","room")}function Pe(e){Ae(e,"images","facilities")}function Ae(e,t,n){De(function(r){var o;try{r.data[t][n]&&(o=r.data[t][n])}catch(e){o=null}var a=v.randomisation;r={action:t,"sub-action":n,data:o,randomisation:a,date:(new Date).getTime()};Ie(e,r)})}function De(e){i()("https://github.agodadev.io/pages/pwanpen/Agoda-data/data.json").then(function(e){return e.json()}).then(function(t){if("function"!=typeof e)return!1;e(t)}).catch(function(e){return log(e)})}function Ce(e,t){var n=t?NSURLRequest.requestWithURL_cachePolicy_timeoutInterval(NSURL.URLWithString(e),NSURLRequestReloadIgnoringLocalCacheData,60):NSURLRequest.requestWithURL(NSURL.URLWithString(e)),r=MOPointer.alloc().init(),o=MOPointer.alloc().init(),a=NSURLConnection.sendSynchronousRequest_returningResponse_error(n,r,o);if(null!=o.value())return print(o.value()),null;var i=r.value();if(200!=i.statusCode())return null;var s=i.allHeaderFields()["Content-Type"];return s&&s.hasPrefix("image/")?NSImage.alloc().initWithData(a):null}function Ie(t,r){switch(log(r),r.action){case"currency":!function(e,t){log(e);var n,r=Oe(e),o=t.randomisation;switch(t["sub-action"]){case"short":n=function(){var e=Le(1,9999).toLocaleString("en"),t="$"+e;return t};break;case"medium":n=function(){var e=Le(999,999999).toLocaleString("en"),t="SGD"+e;return t};break;case"long":n=function(){var e=Le(999999,99999999).toLocaleString("en"),t="VND"+e;return t}}if(r)for(var a=n(),i=0;i<r.layers.length;i++){var s=r.layers[i];o&&(a=n());var c=s.class();switch(c){case MSTextLayer:s.stringValue=a;break;case MSSymbolInstance:var u=s.symbolMaster(),l=r.symbols[u];s.setValue_forOverridePoint_(a,l);break;default:log("This layer is not in any categories")}Q(e,2)}}(t,r);break;case"images":!function(t,n){var r=function(e){for(var t=e.document.selectedLayers().layers(),n=t.count(),r={layers:[],symbols:{},groups:[]},o=0;o<n;o++){var a=t[o],i=a.class();switch(i){default:a&&a.style().firstEnabledFill()&&r.layers.push(a);break;case MSSymbolInstance:r.layers.push(a);var s=a.symbolMaster();if(!r.symbols.hasOwnProperty(s)){var c=Re(a,"image");r.symbols[s]=c}}}return 0==We(r)?(d.alert(b.title,b.selectLayerWithFill),!1):r}(t),o=n.data.slice(0),a=n.randomisation,i=Le(0,o.length-1),s=0;r&&(d.message(g.downloading),e(function(){for(var e=0;e<r.layers.length;e++){var t=r.layers[e],c=t.class();a&&(i=Le(0,o.length-1));var u=encodeURI(o[i]),l=Ce(u);if(a&&o.splice(i,1),0==o.length&&(o=n.data.slice(0)),l)switch(c){default:var m=t.style().firstEnabledFill();m.fillType=y.Pattern,m.patternFillType=S.Fill,m.image=MSImageData.alloc().initWithImage(l);break;case MSSymbolInstance:var p=t.symbolMaster(),f=r.symbols[p],h=MSImageData.alloc().initWithImage(l);t.setValue_forOverridePoint_(h,f)}else s++}s>0&&d.alert(b.title,b.imageUrlBroken),d.message(g.complete)},500))}(t,r);break;case"setRamdomisationPref":!function(e){var t=e.randomisation;c.a.setUserPreferences(_,{randomisation:t})}(r);break;case"translate":!function(e,t){var n=Oe(e);if(n)for(var r=0;r<n.layers.length;r++){var o=n.layers[r],a=o.class();switch(a){case MSTextLayer:var i=t.data;je(o,i,function(e,t){if(e.hasOwnProperty("data")){var n=e.data.translations[0].translatedText;t.stringValue=n}});break;case MSSymbolInstance:break;default:log("This layer is not in any categories")}Q(e,2)}}(t,r);break;case"crossout":!function(e,t){var r=n(/*! sketch */"sketch"),o=n(/*! sketch/dom */"sketch/dom").Text,a=r.getSelectedDocument().selectedLayers;if(1==a.length){var i=t.data.original,s=t.data.discount,c=a.layers[0],u=new o({text:"New rate",style:c.style,parent:c.parent}),l=c.frame.x,d=c.frame.y,m=c.frame.height,p=d+m+12;u.frame.offset(l,p);var f=i*(s/100),h=Math.round(i-f);c.text=parseInt(i).toLocaleString("en"),u.text=parseInt(h).toLocaleString("en"),log(i.toLocaleString("en"));var y=c.frame.width,S=NSBezierPath.bezierPath();S.moveToPoint(NSMakePoint(l+y,d+8)),S.lineToPoint(NSMakePoint(l,d+m-8));var g=MSShapeGroup.layerWithPath(MSPath.pathWithBezierPath(S)),b=g.style().addStylePartOfType(1);b.color=MSColor.colorWithRGBADictionary({r:.8,g:.1,b:.1,a:1}),b.thickness=2,e.document.currentPage().currentArtboard().addLayers([g])}else sendAlert("Select a text layer")}(t,r);default:!function(e,t){var n=Oe(e),r=t.data.slice(0),o=t.randomisation,a=Le(0,r.length-1);if(n)for(var i=0;i<n.layers.length;i++){var s=n.layers[i];o&&(a=Le(0,r.length-1));var c=decodeURIComponent(r[a]),u=s.class();switch(u){case MSTextLayer:s.stringValue=c;break;case MSSymbolInstance:var l=s.symbolMaster(),d=n.symbols[l];s.setValue_forOverridePoint_(c,d);break;default:log("This layer is not in any categories")}o&&r.splice(a,1),0==r.length&&(r=t.data.slice(0)),Q(e,2)}}(t,r)}}function Oe(e){for(var t=e.document.selectedLayers().layers(),n=t.count(),r={layers:[],symbols:{},groups:[]},o=0;o<n;o++){var a=t[o];switch(a.class()){case MSTextLayer:r.layers.push(a);break;default:log("This layer is not in any categories");break;case MSSymbolInstance:r.layers.push(a);var i=a.symbolMaster();if(!r.symbols.hasOwnProperty(i)){var s=Re(a,"stringValue");r.symbols[i]=s}}}return 0==We(r)?(d.alert(b.title,b.selectText),!1):r}function We(e){return e.layers.length+e.groups.length+Object.keys(e.symbols).length}function Re(e,t){var n={overridePoints:[],overrideTitles:[],layer:e};e.overridePoints().forEach(function(e){e.property()==t&&(log(e.layerName()),n.overridePoints.push(e),n.overrideTitles.push(e.layerName()))}),n.overrideTitles=function(e){var t={};return e.forEach(function(n,r){if(e.indexOf(n)!==r){for(var o=((t[n]=n in t?t[n]+1:1)+1),a=n+"("+o+")";-1!==e.indexOf(a);)a=n+"("+ ++o+")";e[r]=a}}),e}(n.overrideTitles);var r={overridePoint:null,overrideTitle:null};return 1==n.overridePoints.length?r.overridePoint=n.overridePoints[0]:r=function(e){var t=COSAlertWindow.new(),n=e.layer.symbolMaster().name();t.setMessageText("Select target layer in symbol named: "+n),t.addButtonWithTitle("Ok"),t.addButtonWithTitle("Cancel");var r=NSPopUpButton.alloc().initWithFrame(NSMakeRect(0,0,130,22));e.overrideTitles.forEach(function(e){r.addItemWithTitle_(e)}),t.addAccessoryView(r);var o={overridePoint:null,overrideTitle:null};if("1000"==t.runModal()){var a=r.indexOfSelectedItem();o.overridePoint=e.overridePoints[a]}return o}(n),r.overridePoint}function Le(e,t){return Math.floor(Math.random()*(t-e+1))+e}function je(e,t,n){var r=t,o=e.stringValue(),a=encodeURI("https://translation.googleapis.com/language/translate/v2?key=AIzaSyCAFZ1a5t1jobpcxV6gmqOrIJ4evftdqXU"+("&target="+r)+("&q="+o));i()(a).then(function(e){return e.json()}).then(function(t){n(t,e)}).catch(function(e){return log(e)})}}.call(this,n(/*! ./node_modules/@skpm/timers/timeout.js */"./node_modules/@skpm/timers/timeout.js").setTimeout)},buffer:
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=require("buffer")},os:
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/*! no static exports found */function(e,t){e.exports=require("os")},path:
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/*! no static exports found */function(e,t){e.exports=require("path")},sketch:
/*!*************************!*\
  !*** external "sketch" ***!
  \*************************/
/*! no static exports found */function(e,t){e.exports=require("sketch")},"sketch/dom":
/*!*****************************!*\
  !*** external "sketch/dom" ***!
  \*****************************/
/*! no static exports found */function(e,t){e.exports=require("sketch/dom")},util:
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/*! no static exports found */function(e,t){e.exports=require("util")}});"default"===key&&"function"==typeof exports?exports(context):exports[key](context)}that.onStartup=__skpm_run.bind(this,"onStartup"),that.onShutdown=__skpm_run.bind(this,"onShutdown"),that.onSupplyHotelName=__skpm_run.bind(this,"onSupplyHotelName"),that.onSupplyAddress=__skpm_run.bind(this,"onSupplyAddress"),that.onSupplyCountry=__skpm_run.bind(this,"onSupplyCountry"),that.onSupplyAirport=__skpm_run.bind(this,"onSupplyAirport"),that.onSupplyCity=__skpm_run.bind(this,"onSupplyCity"),that.onSupplyWeather=__skpm_run.bind(this,"onSupplyWeather"),that.onSupplyTimestamp=__skpm_run.bind(this,"onSupplyTimestamp"),that.onSupplyName=__skpm_run.bind(this,"onSupplyName"),that.onSupplyAircraft=__skpm_run.bind(this,"onSupplyAircraft"),that.onSupplyAirlineName=__skpm_run.bind(this,"onSupplyAirlineName"),that.onSupplyAirportCode=__skpm_run.bind(this,"onSupplyAirportCode"),that.onSupplyDate=__skpm_run.bind(this,"onSupplyDate"),that.onSupplyEmail=__skpm_run.bind(this,"onSupplyEmail"),that.onSupplyFlightDuration=__skpm_run.bind(this,"onSupplyFlightDuration"),that.onSupplyFlightNumber=__skpm_run.bind(this,"onSupplyFlightNumber"),that.onSupplyHotelAmenity=__skpm_run.bind(this,"onSupplyHotelAmenity"),that.onSupplyHotelDescription=__skpm_run.bind(this,"onSupplyHotelDescription"),that.onSupplyHotelRoomType=__skpm_run.bind(this,"onSupplyHotelRoomType"),that.onSupplyNameAndInitial=__skpm_run.bind(this,"onSupplyNameAndInitial"),that.onSupplyUsername=__skpm_run.bind(this,"onSupplyUsername"),that.onSupply24HourTime=__skpm_run.bind(this,"onSupply24HourTime"),that.onSupplyHeroImage=__skpm_run.bind(this,"onSupplyHeroImage"),that.onSupplyRoomImage=__skpm_run.bind(this,"onSupplyRoomImage"),that.onSupplyFacilityImage=__skpm_run.bind(this,"onSupplyFacilityImage"),that.onRun=__skpm_run.bind(this,"default"),that.openPanel=__skpm_run.bind(this,"openPanel"),that.onSelectionChange=__skpm_run.bind(this,"onSelectionChange"),that.commandTextAddressShort=__skpm_run.bind(this,"commandTextAddressShort"),that.commandTextAddressMedium=__skpm_run.bind(this,"commandTextAddressMedium"),that.commandTextAddressLong=__skpm_run.bind(this,"commandTextAddressLong"),that.commandTextAirportShort=__skpm_run.bind(this,"commandTextAirportShort"),that.commandTextAirportMedium=__skpm_run.bind(this,"commandTextAirportMedium"),that.commandTextAirportLong=__skpm_run.bind(this,"commandTextAirportLong"),that.commandTextCityShort=__skpm_run.bind(this,"commandTextCityShort"),that.commandTextCityMedium=__skpm_run.bind(this,"commandTextCityMedium"),that.commandTextCityLong=__skpm_run.bind(this,"commandTextCityLong"),that.commandTextCountryShort=__skpm_run.bind(this,"commandTextCountryShort"),that.commandTextCountryMedium=__skpm_run.bind(this,"commandTextCountryMedium"),that.commandTextCountryLong=__skpm_run.bind(this,"commandTextCountryLong"),that.commandTextPropertyShort=__skpm_run.bind(this,"commandTextPropertyShort"),that.commandTextPropertyMedium=__skpm_run.bind(this,"commandTextPropertyMedium"),that.commandTextPropertyLong=__skpm_run.bind(this,"commandTextPropertyLong"),that.commandTextWeatherShort=__skpm_run.bind(this,"commandTextWeatherShort"),that.commandTextWeatherMedium=__skpm_run.bind(this,"commandTextWeatherMedium"),that.commandTextWeatherLong=__skpm_run.bind(this,"commandTextWeatherLong"),that.commandTextCurrencyShort=__skpm_run.bind(this,"commandTextCurrencyShort"),that.commandTextCurrencyMedium=__skpm_run.bind(this,"commandTextCurrencyMedium"),that.commandTextCurrencyLong=__skpm_run.bind(this,"commandTextCurrencyLong"),that.commandTextTimestampShort=__skpm_run.bind(this,"commandTextTimestampShort"),that.commandTextTimestampMedium=__skpm_run.bind(this,"commandTextTimestampMedium"),that.commandTextTimestampLong=__skpm_run.bind(this,"commandTextTimestampLong"),that.commandTextNameShort=__skpm_run.bind(this,"commandTextNameShort"),that.commandTextNameMedium=__skpm_run.bind(this,"commandTextNameMedium"),that.commandTextNameLong=__skpm_run.bind(this,"commandTextNameLong"),that.commandImagePropertyHero=__skpm_run.bind(this,"commandImagePropertyHero"),that.commandImagePropertyRoom=__skpm_run.bind(this,"commandImagePropertyRoom"),that.commandImagePropertyFacilities=__skpm_run.bind(this,"commandImagePropertyFacilities");